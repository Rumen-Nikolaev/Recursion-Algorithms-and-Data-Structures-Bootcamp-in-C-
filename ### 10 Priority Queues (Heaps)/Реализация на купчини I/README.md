# Внедряване на купчини I

## Преглед
В тази лекция ще обсъдим реализацията на структурата на данните HEAP с помощта на едномерен масив. Ще покрием основните операции на максимална купчина, включително вмъкване, извличане на максималната стойност и премахване на максималната стойност.

## Структура на купчината
Купчината е дървовидна структура и ние ще я представим с помощта на стандартен едномерен масив. Свойствата на купчината ни позволяват да поддържаме нейната структура ефективно:

- **Коренен възел**: Основният възел се съхранява в индекс 0 на масива.
- **Ляво дете**: За възел с индекс `i`, индексът на ляво дете се изчислява като `2*i + 1`.
- **Дясно дете**: Индексът на дясното дете се изчислява като `2*i + 2`.

### Пример
За пример със стойност на възел `36` при индекс `2`:
- **Индекс на ляво дете**: `2*2 + 1 = 5`
- **Индекс на дясно дете**: `2*2 + 2 = 6`

## Структура на класа
Класът куп ще включва:
- **Heap Size**: Променлива за проследяване на броя на елементите в масива.
- **Капацитет**: Константа, указваща максималния брой елементи, които могат да се съхраняват (напр. 10 елемента).

### Публични функции
- `insert(int item)`: Вмъква нов елемент в купчината.
- `get_max()`: Връща максималния елемент в купчината.
- `pool()`: Премахва и връща максималния елемент от купчината.

### Частни функции
- `fix_up(int index)`: Гарантира, че свойството на купчината се поддържа след вмъкването.
- `fix_down(int index)`: Гарантира, че свойството на купчината се поддържа след премахване.

## Вмъкване
При вмъкване на нов елемент:
1. Проверете дали купчината е пълна. Ако е така, подайте грешка при препълване.
2. Вмъкнете елемента в края на масива и увеличете размера на купчината.
3. Извикайте функцията `fix_up`, за да поддържате свойството heap.

### Функция `fix_up`
Функцията `fix_up` проверява дали нововмъкнатият елемент нарушава свойството на купчината. Ако го направи, той разменя елемента с неговия родител и продължава да проверява рекурсивно, докато свойството на купчината не бъде възстановено.

#### Пример за `fix_up`
- Вмъкнете `100` в купчината. Ако родителският възел (напр. „23“) е по-малък от „100“, разменете ги.
- Продължете да проверявате с родителя, докато не бъде достигнат коренът или не се възстанови свойството на купчината.

## Извличане на максимална стойност
Функцията `get_max` проверява дали купчината е празна. Ако не, той връща стойността при индекс `0`, който е максимумът за максимална купчина.

## Премахване на максималната стойност
Функцията `пул` премахва максималната стойност:
1. Разменете основния възел с последния възел в купчината.
2. Намалете размера на купчината.
3. Извикайте функцията `fix_down`, за да възстановите свойството на купчината.
